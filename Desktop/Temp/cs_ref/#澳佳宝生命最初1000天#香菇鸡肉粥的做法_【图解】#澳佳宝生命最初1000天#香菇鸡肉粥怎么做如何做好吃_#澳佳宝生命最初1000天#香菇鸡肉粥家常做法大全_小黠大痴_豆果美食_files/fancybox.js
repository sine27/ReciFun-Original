(function(AJ){var AI,AB,Av,AL,As,AF,Au,Ap,An,Ay=0,R={},Az=[],AG=0,AK={},AC=[],At=null,Ax=new Image,Ar=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,t=/[^\.]\.(swf)\s*$/i,Ah,Ai=1,AD,AH,AE=false,Aw=AJ.extend(AJ("<div/>")[0],{prop:0}),AA=0,Ak=!AJ.support.opacity&&!window.XMLHttpRequest,Af=function(){AB.hide();Ax.onerror=Ax.onload=null;At&&At.abort();AI.empty()},w=function(){AJ.fancybox('<p id="fancybox_error">The requested content cannot be loaded.<br />Please try again later.</p>',{scrolling:"no",padding:20,transitionIn:"none",transitionOut:"none"})},Ag=function(){return[AJ(window).width(),AJ(window).height(),AJ(document).scrollLeft(),AJ(document).scrollTop()]},Ad=function(){var F=Ag(),A={},G=AK.margin,C=AK.autoScale,E=(20+G)*2,D=(20+G)*2,B=AK.padding*2;if(AK.width.toString().indexOf("%")>-1){A.width=F[0]*parseFloat(AK.width)/100-40;C=false}else{A.width=AK.width+B}if(AK.height.toString().indexOf("%")>-1){A.height=F[1]*parseFloat(AK.height)/100-40;C=false}else{A.height=AK.height+B}if(C&&(A.width>F[0]-E||A.height>F[1]-D)){if(R.type=="image"||R.type=="swf"){E+=B;D+=B;C=Math.min(Math.min(F[0]-E,AK.width)/AK.width,Math.min(F[1]-D,AK.height)/AK.height);A.width=Math.round(C*(A.width-B))+B;A.height=Math.round(C*(A.height-B))+B}else{A.width=Math.min(A.width,F[0]-E);A.height=Math.min(A.height,F[1]-D)}}A.top=F[3]+(F[1]-(A.height+40))*0.5;A.left=F[2]+(F[0]-(A.width+40))*0.5;if(AK.autoScale===false){A.top=Math.max(F[3]+G,A.top);A.left=Math.max(F[2]+G,A.left)}return A},Ae=function(A){if(A&&A.length){switch(AK.titlePosition){case"inside":return A;case"over":return'<span id="fancybox-title-over">'+A+"</span>";default:return'<span id="fancybox-title-wrap"><span id="fancybox-title-left"></span><span id="fancybox-title-main">'+A+'</span><span id="fancybox-title-right"></span></span>'}}return false},Ab=function(){var B=AK.title,A=AH.width-AK.padding*2,C="fancybox-title-"+AK.titlePosition;AJ("#fancybox-title").remove();AA=0;if(AK.titleShow!==false){B=AJ.isFunction(AK.titleFormat)?AK.titleFormat(B,AC,AG,AK):Ae(B);if(!(!B||B==="")){AJ('<div id="fancybox-title" class="'+C+'" />').css({width:A,paddingLeft:AK.padding,paddingRight:AK.padding}).html(B).appendTo("body");switch(AK.titlePosition){case"inside":AA=AJ("#fancybox-title").outerHeight(true)-AK.padding;AH.height+=AA;break;case"over":AJ("#fancybox-title").css("bottom",AK.padding);break;default:AJ("#fancybox-title").css("bottom",AJ("#fancybox-title").outerHeight(true)*-1);break}AJ("#fancybox-title").appendTo(As).hide()}}},Ac=function(){AJ(document).unbind("keydown.fb").bind("keydown.fb",function(A){if(A.keyCode==27&&AK.enableEscapeButton){A.preventDefault();AJ.fancybox.close()}else{if(A.keyCode==37){A.preventDefault();AJ.fancybox.prev()}else{if(A.keyCode==39){A.preventDefault();AJ.fancybox.next()}}}});if(AJ.fn.mousewheel){AL.unbind("mousewheel.fb");AC.length>1&&AL.bind("mousewheel.fb",function(B,A){B.preventDefault();AE||A===0||(A>0?AJ.fancybox.prev():AJ.fancybox.next())})}if(AK.showNavArrows){if(AK.cyclic&&AC.length>1||AG!==0){Ap.show()}if(AK.cyclic&&AC.length>1||AG!=AC.length-1){An.show()}}},o=function(){var B,A;if(AC.length-1>AG){B=AC[AG+1].href;if(typeof B!=="undefined"&&B.match(Ar)){A=new Image;A.src=B}}if(AG>0){B=AC[AG-1].href;if(typeof B!=="undefined"&&B.match(Ar)){A=new Image;A.src=B}}},Al=function(){AF.css("overflow",AK.scrolling=="auto"?AK.type=="image"||AK.type=="iframe"||AK.type=="swf"?"hidden":"auto":AK.scrolling=="yes"?"auto":"visible");if(!AJ.support.opacity){AF.get(0).style.removeAttribute("filter");AL.get(0).style.removeAttribute("filter")}AJ("#fancybox-title").show();AK.hideOnContentClick&&AF.one("click",AJ.fancybox.close);AK.hideOnOverlayClick&&Av.one("click",AJ.fancybox.close);AK.showCloseButton&&Au.show();Ac();AJ(window).bind("resize.fb",AJ.fancybox.center);AK.centerOnScroll?AJ(window).bind("scroll.fb",AJ.fancybox.center):AJ(window).unbind("scroll.fb");AJ.isFunction(AK.onComplete)&&AK.onComplete(AC,AG,AK);AE=false;o()},Am=function(D){var A=Math.round(AD.width+(AH.width-AD.width)*D),E=Math.round(AD.height+(AH.height-AD.height)*D),B=Math.round(AD.top+(AH.top-AD.top)*D),C=Math.round(AD.left+(AH.left-AD.left)*D);AL.css({width:A+"px",height:E+"px",top:B+"px",left:C+"px"});A=Math.max(A-AK.padding*2,0);E=Math.max(E-(AK.padding*2+AA*D),0);AF.css({width:A+"px",height:E+"px"});if(typeof AH.opacity!=="undefined"){AL.css("opacity",D<0.5?0.5:D)}},r=function(B){var A=B.offset();A.top+=parseFloat(B.css("paddingTop"))||0;A.left+=parseFloat(B.css("paddingLeft"))||0;A.top+=parseFloat(B.css("border-top-width"))||0;A.left+=parseFloat(B.css("border-left-width"))||0;A.width=B.width();A.height=B.height();return A},Aa=function(){var B=R.orig?AJ(R.orig):false,A={};if(B&&B.length){B=r(B);A={width:B.width+AK.padding*2,height:B.height+AK.padding*2,top:B.top-AK.padding-20,left:B.left-AK.padding-20}}else{B=Ag();A={width:1,height:1,top:B[3]+B[1]*0.5,left:B[2]+B[0]*0.5}}return A},Aj=function(){AB.hide();if(AL.is(":visible")&&AJ.isFunction(AK.onCleanup)){if(AK.onCleanup(AC,AG,AK)===false){AJ.event.trigger("fancybox-cancel");AE=false;return}}AC=Az;AG=Ay;AK=R;AF.get(0).scrollTop=0;AF.get(0).scrollLeft=0;if(AK.overlayShow){Ak&&AJ("select:not(#fancybox-tmp select)").filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one("fancybox-cleanup",function(){this.style.visibility="inherit"});Av.css({"background-color":AK.overlayColor,opacity:AK.overlayOpacity}).unbind().show()}AH=Ad();Ab();if(AL.is(":visible")){AJ(Au.add(Ap).add(An)).hide();var B=AL.position(),A;AD={top:B.top,left:B.left,width:AL.width(),height:AL.height()};A=AD.width==AH.width&&AD.height==AH.height;AF.fadeOut(AK.changeFade,function(){var C=function(){AF.html(AI.contents()).fadeIn(AK.changeFade,Al)};AJ.event.trigger("fancybox-change");AF.empty().css("overflow","hidden");if(A){AF.css({top:AK.padding,left:AK.padding,width:Math.max(AH.width-AK.padding*2,1),height:Math.max(AH.height-AK.padding*2-AA,1)});C()}else{AF.css({top:AK.padding,left:AK.padding,width:Math.max(AD.width-AK.padding*2,1),height:Math.max(AD.height-AK.padding*2,1)});Aw.prop=0;AJ(Aw).animate({prop:1},{duration:AK.changeSpeed,easing:AK.easingChange,step:Am,complete:C})}})}else{AL.css("opacity",1);if(AK.transitionIn=="elastic"){AD=Aa();AF.css({top:AK.padding,left:AK.padding,width:Math.max(AD.width-AK.padding*2,1),height:Math.max(AD.height-AK.padding*2,1)}).html(AI.contents());AL.css(AD).show();if(AK.opacity){AH.opacity=0}Aw.prop=0;AJ(Aw).animate({prop:1},{duration:AK.speedIn,easing:AK.easingIn,step:Am,complete:Al})}else{AF.css({top:AK.padding,left:AK.padding,width:Math.max(AH.width-AK.padding*2,1),height:Math.max(AH.height-AK.padding*2-AA,1)}).html(AI.contents());AL.css(AH).fadeIn(AK.transitionIn=="none"?0:AK.speedIn,Al)}}},Aq=function(){AI.width(R.width);AI.height(R.height);if(R.width=="auto"){R.width=AI.width()}if(R.height=="auto"){R.height=AI.height()}Aj()},f=function(){AE=true;R.width=Ax.width;R.height=Ax.height;AJ("<img />").attr({id:"fancybox-img",src:Ax.src,alt:R.title}).appendTo(AI);Aj()},Ao=function(){Af();var E=Az[Ay],A,F,B,D,C;R=AJ.extend({},AJ.fn.fancybox.defaults,typeof AJ(E).data("fancybox")=="undefined"?R:AJ(E).data("fancybox"));B=E.title||AJ(E).title||R.title||"";if(E.nodeName&&!R.orig){R.orig=AJ(E).children("img:first").length?AJ(E).children("img:first"):AJ(E)}if(B===""&&R.orig){B=R.orig.attr("alt")}A=E.nodeName&&/^(?:javascript|#)/i.test(E.href)?R.href||null:R.href||E.href||null;if(R.type){F=R.type;if(!A){A=R.content}}else{if(R.content){F="html"}else{if(A){if(A.match(Ar)){F="image"}else{if(A.match(t)){F="swf"}else{if(AJ(E).hasClass("iframe")){F="iframe"}else{if(A.match(/#/)){E=A.substr(A.indexOf("#"));F=AJ(E).length>0?"inline":"ajax"}else{F="ajax"}}}}}else{F="inline"}}}R.type=F;R.href=A;R.title=B;if(R.autoDimensions&&R.type!=="iframe"&&R.type!=="swf"){R.width="auto";R.height="auto"}if(R.modal){R.overlayShow=true;R.hideOnOverlayClick=false;R.hideOnContentClick=false;R.enableEscapeButton=false;R.showCloseButton=false}if(AJ.isFunction(R.onStart)){if(R.onStart(Az,Ay,R)===false){AE=false;return}}AI.css("padding",20+R.padding+R.margin);AJ(".fancybox-inline-tmp").unbind("fancybox-cancel").bind("fancybox-change",function(){AJ(this).replaceWith(AF.children())});switch(F){case"html":AI.html(R.content);Aq();break;case"inline":AJ('<div class="fancybox-inline-tmp" />').hide().insertBefore(AJ(E)).bind("fancybox-cleanup",function(){AJ(this).replaceWith(AF.children())}).bind("fancybox-cancel",function(){AJ(this).replaceWith(AI.children())});AJ(E).appendTo(AI);Aq();break;case"image":AE=false;AJ.fancybox.showActivity();Ax=new Image;Ax.onerror=function(){w()};Ax.onload=function(){Ax.onerror=null;Ax.onload=null;f()};Ax.src=A;break;case"swf":D='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+R.width+'" height="'+R.height+'"><param name="movie" value="'+A+'"></param>';C="";AJ.each(R.swf,function(G,H){D+='<param name="'+G+'" value="'+H+'"></param>';C+=" "+G+'="'+H+'"'});D+='<embed src="'+A+'" type="application/x-shockwave-flash" width="'+R.width+'" height="'+R.height+'"'+C+"></embed></object>";AI.html(D);Aq();break;case"ajax":E=A.split("#",2);F=R.ajax.data||{};if(E.length>1){A=E[0];if(typeof F=="string"){F+="&selector="+E[1]}else{F.selector=E[1]}}AE=false;AJ.fancybox.showActivity();At=AJ.ajax(AJ.extend(R.ajax,{url:A,data:F,error:w,success:function(G){if(At.status==200){AI.html(G);Aq()}}}));break;case"iframe":AJ('<iframe id="fancybox-frame" name="fancybox-frame'+(new Date).getTime()+'" frameborder="0" hspace="0" scrolling="'+R.scrolling+'" src="'+R.href+'"></iframe>').appendTo(AI);Aj();break}},a=function(){if(AB.is(":visible")){AJ("div",AB).css("top",Ai*-40+"px");Ai=(Ai+1)%12}else{clearInterval(Ah)}},d=function(){if(!AJ("#fancybox-wrap").length){AJ("body").append(AI=AJ('<div id="fancybox-tmp"></div>'),AB=AJ('<div id="fancybox-loading"><div></div></div>'),Av=AJ('<div id="fancybox-overlay"></div>'),AL=AJ('<div id="fancybox-wrap"></div>'));if(!AJ.support.opacity){AL.addClass("fancybox-ie");AB.addClass("fancybox-ie")}As=AJ('<div id="fancybox-outer"></div>').append('<div class="fancy-bg" id="fancy-bg-n"></div><div class="fancy-bg" id="fancy-bg-ne"></div><div class="fancy-bg" id="fancy-bg-e"></div><div class="fancy-bg" id="fancy-bg-se"></div><div class="fancy-bg" id="fancy-bg-s"></div><div class="fancy-bg" id="fancy-bg-sw"></div><div class="fancy-bg" id="fancy-bg-w"></div><div class="fancy-bg" id="fancy-bg-nw"></div>').appendTo(AL);As.append(AF=AJ('<div id="fancybox-inner"></div>'),Au=AJ('<a id="fancybox-close"></a>'),Ap=AJ('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),An=AJ('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>'));Au.click(AJ.fancybox.close);AB.click(AJ.fancybox.cancel);Ap.click(function(A){A.preventDefault();AJ.fancybox.prev()});An.click(function(A){A.preventDefault();AJ.fancybox.next()});if(Ak){Av.get(0).style.setExpression("height","document.body.scrollHeight > document.body.offsetHeight ? document.body.scrollHeight : document.body.offsetHeight + 'px'");AB.get(0).style.setExpression("top","(-20 + (document.documentElement.clientHeight ? document.documentElement.clientHeight/2 : document.body.clientHeight/2 ) + ( ignoreMe = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop )) + 'px'");As.prepend('<iframe id="fancybox-hide-sel-frame" src="javascript:\'\';" scrolling="no" frameborder="0" ></iframe>')}}};AJ.fn.fancybox=function(A){AJ(this).data("fancybox",AJ.extend({},A,AJ.metadata?AJ(this).metadata():{})).unbind("click.fb").bind("click.fb",function(B){B.preventDefault();if(!AE){AE=true;AJ(this).blur();Az=[];Ay=0;B=AJ(this).attr("rel")||"";if(!B||B==""||B==="nofollow"){Az.push(this)}else{Az=AJ("a[rel="+B+"], area[rel="+B+"]");Ay=Az.index(this)}Ao();return false}});return this};AJ.fancybox=function(C,A){if(!AE){AE=true;A=typeof A!=="undefined"?A:{};Az=[];Ay=A.index||0;if(AJ.isArray(C)){for(var D=0,B=C.length;D<B;D++){if(typeof C[D]=="object"){AJ(C[D]).data("fancybox",AJ.extend({},A,C[D]))}else{C[D]=AJ({}).data("fancybox",AJ.extend({content:C[D]},A))}}Az=jQuery.merge(Az,C)}else{if(typeof C=="object"){AJ(C).data("fancybox",AJ.extend({},A,C))}else{C=AJ({}).data("fancybox",AJ.extend({content:C},A))}Az.push(C)}if(Ay>Az.length||Ay<0){Ay=0}Ao()}};AJ.fancybox.showActivity=function(){clearInterval(Ah);AB.show();Ah=setInterval(a,66)};AJ.fancybox.hideActivity=function(){AB.hide()};AJ.fancybox.next=function(){return AJ.fancybox.pos(AG+1)};AJ.fancybox.prev=function(){return AJ.fancybox.pos(AG-1)};AJ.fancybox.pos=function(A){if(!AE){A=parseInt(A,10);if(A>-1&&AC.length>A){Ay=A;Ao()}if(AK.cyclic&&AC.length>1&&A<0){Ay=AC.length-1;Ao()}if(AK.cyclic&&AC.length>1&&A>=AC.length){Ay=0;Ao()}}};AJ.fancybox.cancel=function(){if(!AE){AE=true;AJ.event.trigger("fancybox-cancel");Af();R&&AJ.isFunction(R.onCancel)&&R.onCancel(Az,Ay,R);AE=false}};AJ.fancybox.close=function(){function B(){Av.fadeOut("fast");AL.hide();AJ.event.trigger("fancybox-cleanup");AF.empty();AJ.isFunction(AK.onClosed)&&AK.onClosed(AC,AG,AK);AC=R=[];AG=Ay=0;AK=R={};AE=false}if(!(AE||AL.is(":hidden"))){AE=true;if(AK&&AJ.isFunction(AK.onCleanup)){if(AK.onCleanup(AC,AG,AK)===false){AE=false;return}}Af();AJ(Au.add(Ap).add(An)).hide();AJ("#fancybox-title").remove();AL.add(AF).add(Av).unbind();AJ(window).unbind("resize.fb scroll.fb");AJ(document).unbind("keydown.fb");AF.css("overflow","hidden");if(AK.transitionOut=="elastic"){AD=Aa();var A=AL.position();AH={top:A.top,left:A.left,width:AL.width(),height:AL.height()};if(AK.opacity){AH.opacity=1}Aw.prop=1;AJ(Aw).animate({prop:0},{duration:AK.speedOut,easing:AK.easingOut,step:Am,complete:B})}else{AL.fadeOut(AK.transitionOut=="none"?0:AK.speedOut,B)}}};AJ.fancybox.resize=function(){var B,A;if(!(AE||AL.is(":hidden"))){AE=true;B=AF.wrapInner("<div style='overflow:auto'></div>").children();A=B.height();AL.css({height:A+AK.padding*2+AA});AF.css({height:A});B.replaceWith(B.children());AJ.fancybox.center()}};AJ.fancybox.center=function(){AE=true;var B=Ag(),A=AK.margin,C={};C.top=B[3]+(B[1]-(AL.height()-AA+40))*0.5;C.left=B[2]+(B[0]-(AL.width()+40))*0.5;C.top=Math.max(B[3]+A,C.top);C.left=Math.max(B[2]+A,C.left);AL.css(C);AE=false};AJ.fn.fancybox.defaults={padding:10,margin:20,opacity:false,modal:false,cyclic:false,scrolling:"auto",width:560,height:340,autoScale:true,autoDimensions:true,centerOnScroll:false,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:true,hideOnContentClick:false,overlayShow:true,overlayOpacity:0.6,overlayColor:"#000",titleShow:true,titlePosition:"outside",titleFormat:null,transitionIn:"fade",transitionOut:"fade",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",easingOut:"swing",showCloseButton:true,showNavArrows:true,enableEscapeButton:true,onStart:null,onCancel:null,onComplete:null,onCleanup:null,onClosed:null};AJ(document).ready(function(){d()})})(jQuery);